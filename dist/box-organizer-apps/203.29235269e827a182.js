"use strict";(self.webpackChunkbox_organizer_apps=self.webpackChunkbox_organizer_apps||[]).push([[203],{5203:(I,l,o)=>{o.r(l),o.d(l,{RegisterComponent:()=>j});var d=o(5207),f=o(2881),i=o(9417),g=o(5596),h=o(4731),u=o(9978),c=o(4726),e=o(1360),C=o(467),M=o(3154),v=o(5312);let R=(()=>{class n{createUser(a){return(0,C.A)(function*(){return(yield M.A.post(`${v.c.apiUrl}/users/v1/create`,a)).data})()}static \u0275fac=function(s){return new(s||n)};static \u0275prov=e.jDH({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var P=o(7643),F=o(1114),w=o(6255),p=o(2469);function y(n,D){if(1&n&&(e.j41(0,"p",12),e.EFF(1),e.k0s()),2&n){const a=e.XpG();e.R7$(),e.JRh(a.form.error)}}let j=(()=>{class n{userService;http;router;snackBar;form={name:"",email:"",password:"",confirmPassword:"",loading:!1,error:""};constructor(a,s,r,m){this.userService=a,this.http=s,this.router=r,this.snackBar=m}register(){if(this.form.error="",!this.form.name||0===this.form.name.trim().length)return void(this.form.error="Digite seu nome de usu\xe1rio.");if(!/^[A-Za-z0-9]+$/.test(this.form.name))return void(this.form.error="Nome de usu\xe1rio inv\xe1lido. Use apenas letras e n\xfameros, sem espa\xe7os.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(this.form.email))return void(this.form.error="Digite um e-mail v\xe1lido.");if(this.form.password!==this.form.confirmPassword)return void(this.form.error="As senhas n\xe3o coincidem.");const r={name:this.form.name.trim(),email:this.form.email.trim(),password:this.form.password,confirmPassword:this.form.confirmPassword};this.form.loading=!0,this.userService.createUser(r).then(()=>{this.form.loading=!1,this.showToast("Usu\xe1rio criado com sucesso! Pro favor fa\xe7a a confirma\xe7\xe3o do seu e-mail.","success"),this.router.navigate([""])}).catch(()=>{this.form.loading=!1,this.form.error="Nome inv\xe1lido ou j\xe1 est\xe1 em uso. Por favor, tente outro."})}showToast(a,s="warning"){this.snackBar.open(a,"Fechar",{duration:3e3,horizontalPosition:"right",verticalPosition:"top",panelClass:[`${s}-toast`]})}static \u0275fac=function(s){return new(s||n)(e.rXU(R),e.rXU(P.Qq),e.rXU(F.Ix),e.rXU(w.UG))};static \u0275cmp=e.VBU({type:n,selectors:[["app-register"]],decls:26,vars:7,consts:[[1,"register-container"],[1,"register-card"],[1,"register-title"],[3,"ngSubmit"],["appearance","fill",1,"full-width"],["matInput","","type","text","name","name","required","",3,"ngModelChange","ngModel"],["matInput","","type","email","name","email","required","",3,"ngModelChange","ngModel"],["matInput","","type","password","name","password","required","",3,"ngModelChange","ngModel"],["matInput","","type","password","name","confirmPassword","required","",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary","type","submit",1,"full-width",3,"disabled"],["class","error",4,"ngIf"],["routerLink","",1,"link-button"],[1,"error"]],template:function(s,r){1&s&&(e.j41(0,"div",0)(1,"mat-card",1)(2,"h2",2),e.EFF(3,"Criar Conta"),e.k0s(),e.j41(4,"form",3),e.bIt("ngSubmit",function(){return r.register()}),e.j41(5,"mat-form-field",4)(6,"mat-label"),e.EFF(7,"Nome"),e.k0s(),e.j41(8,"input",5),e.mxI("ngModelChange",function(t){return e.DH7(r.form.name,t)||(r.form.name=t),t}),e.k0s()(),e.j41(9,"mat-form-field",4)(10,"mat-label"),e.EFF(11,"Email"),e.k0s(),e.j41(12,"input",6),e.mxI("ngModelChange",function(t){return e.DH7(r.form.email,t)||(r.form.email=t),t}),e.k0s()(),e.j41(13,"mat-form-field",4)(14,"mat-label"),e.EFF(15,"Senha"),e.k0s(),e.j41(16,"input",7),e.mxI("ngModelChange",function(t){return e.DH7(r.form.password,t)||(r.form.password=t),t}),e.k0s()(),e.j41(17,"mat-form-field",4)(18,"mat-label"),e.EFF(19,"Confirmar Senha"),e.k0s(),e.j41(20,"input",8),e.mxI("ngModelChange",function(t){return e.DH7(r.form.confirmPassword,t)||(r.form.confirmPassword=t),t}),e.k0s()(),e.j41(21,"button",9),e.EFF(22),e.k0s(),e.DNE(23,y,2,1,"p",10),e.j41(24,"a",11),e.EFF(25,"J\xe1 tem conta? Entrar"),e.k0s()()()()),2&s&&(e.R7$(8),e.R50("ngModel",r.form.name),e.R7$(4),e.R50("ngModel",r.form.email),e.R7$(4),e.R50("ngModel",r.form.password),e.R7$(4),e.R50("ngModel",r.form.confirmPassword),e.R7$(),e.Y8G("disabled",r.form.loading),e.R7$(),e.SpI(" ",r.form.loading?"Cadastrando...":"Criar Conta"," "),e.R7$(),e.Y8G("ngIf",r.form.error))},dependencies:[f.MD,f.bT,i.YN,i.qT,i.me,i.BC,i.cb,i.YS,i.vS,i.cV,d.iI,d.Wk,g.Hu,g.RN,h.M,p.j,p.M,u.fS,u.fg,c.Hl,c.$z],styles:[".register-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;padding:1rem}.register-card[_ngcontent-%COMP%]{width:100%;max-width:400px;padding:2rem;display:flex;flex-direction:column}.register-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.full-width[_ngcontent-%COMP%]{width:100%;margin-top:1rem}.error[_ngcontent-%COMP%]{color:red;margin-top:1rem;text-align:center}.link-button[_ngcontent-%COMP%]{display:block;margin-top:1.5rem;text-align:center;color:#1976d2;text-decoration:none;font-weight:500;transition:color .2s ease}.link-button[_ngcontent-%COMP%]:hover{color:#0d47a1;text-decoration:underline}"]})}return n})()}}]);